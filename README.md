# good-store

# Setup

## System Requirements
The system should have `docker` and `docker-compose` installed and running to start the system.

### Initial Setup (the first time)
These commands will build the storeback docker containers and seed the database with some default products.

1. Execute
`docker-compose up --build`

This should build 4 containers - Redis, PostgreSQL DB, storeback, and storefront.

2. In a separate terminal, launch `docker exec app_storeback npm run setup` and then `docker exec app_storeback npm run build:admin`.
These commands will populate the storeback with default data and build the admin interface.

After that, you can stop the docker-compose terminal and proceed to launch.

### Launch the Frontend
Just execute in the terminal
`docker-compose up`.

For the store, open:
 - http://localhost:8000

For the admin view, open:
 - http://localhost:7001

The email is `admin@beam-phones.com`
Password: `Test@1234!`
You can add new products, confirm orders, and add payment methods in the admin screens.

## The Application

The main application, once opened, will show a list of products with the cheapest price. Once clicked, a detailed view will be opened, where each product will have 2 variants - Color and Memory. Changing these will change the price of the product. Also, the product might have several images. All the images, titles, and descriptions are generated by ChatGPT; the rest is generated by faker.js.
Users can click the "Add to cart" button, then on the top right click the Cart icon (which will have a total number). From the cart page, users can proceed to the checkout, where the form for address, payment, and shipping info will appear. After that, the order can be placed, similar to a real online shop.

# Application Structure

## Backend
The application consists of storeback, which is handled by [Medusa](https://medusajs.com/).
It is a headless storeback, which provides us API to integrate, and the FE, which is located in the storefront, using those endpoints.

## Frontend

The frontend is a Next.js app using recent app router features.
It has routes for:
 - `/` - The main page. Displays the list of products.
 - `/cart` - The cart page, displays the items inside the cart.
 - `/checkout` - The checkout page.
 - `/order/confirmed/:id` - Simple page for order confirmation.
 - `/product/:handle` - Specific product detail page, where the user can add the product to the cart.

All these routes are declared in the app folder with the Next.js recommended approach. Page files are server components, and the data is fetched on the server. This gives our store the ability to be SEO optimized.

- The `lib` folder contains the API integrations. Files with the extension `.server.ts` contain specific access to the Medusa backend. For example, `cart.server.ts` will handle cart-specific operations. Almost all calls are cached (so multiple views can simultaneously call the function, without a duplicate BE call) and tagged (to be able to revalidate in the action calls).

There is also an `actions` folder, where the functions defined there will be executed on the server and can revalidate already fetched tags.

- `utils` - Folder for specific utility functions.
- `components` - Components to render the UI. We used Headless UI, Tailwind, and some components use Framer Motion (for animations). We also use MedusaJS/UI for specific store components like the Add to Cart button, or handling the variants. Forms (like address forms in the checkout) use recent React features (useFormState) to execute "actions" in the lib folder. Everything was built using the recent React recommended style.

---